{"mappings":"qhBAAA,IAAAA,EAAAC,EAAA,SAGA,IAAIC,EAAW,EAmEf,SAASC,EAAcC,EAAUC,GAE/B,OADsBC,KAAKC,SAAW,GAE7BC,QAAQC,QAAQ,CAAEC,SAAAN,E,MAAUC,IAE9BG,QAAQG,OAAO,CAAED,SAAAN,E,MAAUC,G,CAvEvBO,SAASC,cAAc,SAE/BC,iBAAiB,UAEtB,SAAsBC,GACpBA,EAAMC,iBAEN,MAAMC,EAAeF,EAAMG,cAAcC,SAEnCd,EAAQY,EAAaZ,MAAMe,MAC3BC,EAAOJ,EAAaI,KAAKD,MACzBE,EAASL,EAAaK,OAAOF,OAMrC,SAA8Bf,EAAOiB,EAAQD,GAC3CnB,EAAW,EAOb,SAA4BqB,EAAUC,GACpC,MAAMC,EAASC,YAAW,KACxBvB,EAAcoB,EAAUC,GACrBG,MAAK,EAAGjB,SAAAkB,EAAQvB,MAAEA,MACjBwB,EAAA7B,GAAS8B,OAAOC,QACd,qBAAqBH,QAAevB,MACrC,IAEF2B,OAAM,EAAGtB,SAAAuB,EAAQ5B,MAAEA,MAClBwB,EAAA7B,GAAS8B,OAAOI,QACd,oBAAoBD,QAAe5B,MACpC,GACD,GACHmB,GACHW,aAAaV,E,CApBbW,CAAmBlC,EAAUG,GAuB/B,SAA8BgC,EAAOf,EAAQD,GAC3CgB,EAAQC,OAAOD,GACf,MAAMZ,EAASc,aAAY,KACV,IAAXjB,GAIJnB,EAAcD,EAAUmC,GACrBV,MAAK,EAAGjB,SAAA8B,EAAQnC,MAAEA,MACjBwB,EAAA7B,GAAS8B,OAAOC,QACd,qBAAqBS,QAAenC,MACrC,IAEF2B,OAAM,EAAGtB,SAAA+B,EAAQpC,MAAEA,MAClBwB,EAAA7B,GAAS8B,OAAOI,QACd,oBAAoBO,QAAepC,MACpC,IAELH,GAAY,EACZoB,GAAU,EACVe,GAASC,OAAOjB,IAhBdqB,cAAcjB,EAgBK,GACpBJ,E,CA3CHsB,CAAqBtC,EAAOiB,EAAQD,E,CAPpCuB,CAAqBvC,EAAOiB,EAAQD,E","sources":["src/js/03-promises.js"],"sourcesContent":["import Notiflix from 'notiflix';\nimport 'notiflix/dist/notiflix-3.2.5.min.css';\n\nlet position = 1;\nconst form = document.querySelector('.form');\n\nform.addEventListener('submit', onFormSubmit);\n\nfunction onFormSubmit(event) {\n  event.preventDefault();\n\n  const formElements = event.currentTarget.elements;\n\n  const delay = formElements.delay.value;\n  const step = formElements.step.value;\n  const amount = formElements.amount.value;\n\n  amountFunctionMaking(delay, amount, step);\n}\n\n\nfunction amountFunctionMaking(delay, amount, step) {\n  position = 1;\n  firstDelayFunction(position, delay);\n  stepIntervalFunction(delay, amount, step);\n\n  \n}\n\nfunction firstDelayFunction(position, delay) {\n  const timeId = setTimeout(() => {\n    createPromise(position, delay)\n      .then(({ position, delay }) => {\n        Notiflix.Notify.success(\n          `Fulfilled promise ${position} in ${delay}ms`\n        );\n      })\n      .catch(({ position, delay }) => {\n        Notiflix.Notify.failure(\n          `Rejected promise ${position} in ${delay}ms`\n        );\n      });\n  }, delay);\n  clearTimeout(timeId);\n}\n\nfunction stepIntervalFunction(delay, amount, step) {\n  delay = Number(delay);\n  const timeId = setInterval(() => {\n    if (amount === 0) {\n      clearInterval(timeId);\n      return;\n    }\n    createPromise(position, delay)\n      .then(({ position, delay }) => {\n        Notiflix.Notify.success(\n          `Fulfilled promise ${position} in ${delay}ms`\n        );\n      })\n      .catch(({ position, delay }) => {\n        Notiflix.Notify.failure(\n          `Rejected promise ${position} in ${delay}ms`\n        );\n      });\n    position += 1;\n    amount -= 1;\n    delay += Number(step);\n  }, step);\n}\n\nfunction createPromise(position, delay) {\n  const shouldResolve = Math.random() > 0.3;\n  if (shouldResolve) {\n    return Promise.resolve({ position, delay });\n  }\n  return Promise.reject({ position, delay });\n}\n"],"names":["$eWCmQ","parcelRequire","$47d4ff9957288465$var$position","$47d4ff9957288465$var$createPromise","position6","delay","Math","random","Promise","resolve","position","reject","document","querySelector","addEventListener","event","preventDefault","formElements","currentTarget","elements","value","step","amount","position1","delay1","timeId","setTimeout","then","position2","$parcel$interopDefault","Notify","success","catch","position3","failure","clearTimeout","$47d4ff9957288465$var$firstDelayFunction","delay2","Number","setInterval","position4","position5","clearInterval","$47d4ff9957288465$var$stepIntervalFunction","$47d4ff9957288465$var$amountFunctionMaking"],"version":3,"file":"03-promises.0baf768a.js.map"}